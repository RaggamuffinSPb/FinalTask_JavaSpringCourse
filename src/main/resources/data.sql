----------------------------------------------------------------------------------
-- первичное наполнение БД категориями, товарами и админской учёткой
----------------------------------------------------------------------------------
-- Вставка категорий
INSERT INTO categories (category_name, description)
VALUES
    ('Автомузыка', 'Магнитолы, сабвуферы, усилители, акустика'),
    ('Запчасти', 'Оригинальные и аналогичные запчасти для ТО и ремонта'),
    ('Химия', 'Масла, автохимия, очистители, антифризы'),
    ('Аксессуары', 'Чехлы, коврики, органайзеры, освежители'),
    ('Тюнинг', 'Спойлеры, обвесы, диски, спортивные детали')
ON CONFLICT (category_name) DO NOTHING;

-- Вставка товаров (привязка к категориям по порядку вставки выше)
INSERT INTO items (item_name, item_description, price, quantity_in_stock, category_id)
VALUES
    ('Магнитола Pioneer DEH-80PRS', 'Флагманская магнитола с процессором времени, 3 RCA выхода', 45000.00, 5, 1),
    ('Сабвуфер Kicx ICX 12', '12-дюймовый сабвуфер в закрытом корпусе, 800Вт пиковой мощности', 12000.00, 8, 1),
    ('Тормозной диск Brembo передний', 'Диск вентилируемый, диаметр 330мм, для VW Passat B7', 12000.00, 3, 2),
    ('Свеча зажигания NGK BKR6E', 'Медный электрод, калильное число 6, резьба M14x1.25', 350.00, 50, 2),
    ('Моторное масло Liqui Moly 5W-40', 'Синтетическое, 4л, допуск VW 502 00/505 00', 3500.00, 25, 3),
    ('Очиститель тормозов ABRO', 'Аэрозольный баллон 500мл, быстро испаряется', 450.00, 40, 3),
    ('Коврики в салон EVA', 'Влагозащитные, на весь салон, модель Solaris', 2800.00, 12, 4),
    ('Чехол на руль из алькантары', 'Универсальный, чёрный, прострочка контрастной нитью', 2100.00, 15, 4),
    ('Спойлер карбоновый универсальный', 'Карбон 3K, длина 1200мм, крепление на двухсторонний скотч', 9500.00, 3, 5),
    ('Дефлекторы окон AVS', 'Комплект из 4 шт., в чёрном матовом цвете, клейкая лента в комплекте', 3200.00, 7, 5)
ON CONFLICT DO NOTHING;

-- Хэш пароля 'admin' SHA256: 8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918
INSERT INTO users (username, password, role, api_key)
VALUES (
    'admin',
    '8c6976e5b5410415bde908bd4dee15dfb167a9c873fc4bb8a81f6f2ab448a918',
    'ADMIN',
    'student_secret_key_123'
)
ON CONFLICT (username) DO UPDATE
SET api_key = EXCLUDED.api_key,
    role = EXCLUDED.role;